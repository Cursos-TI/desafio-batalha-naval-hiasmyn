#include <stdio.h>
#include <stdbool.h>

#define LINHAS   10
#define COLUNAS  10
#define TAM_NAVIO 3
#define AGUA      0
#define NAVIO     3

typedef enum { HORIZONTAL = 0, VERTICAL = 1, DIAG_DR = 2, DIAG_DL = 3 } Orient;

bool cabe(int tab[LINHAS][COLUNAS], const int inicio[2], Orient o) {
    int r = inicio[0], c = inicio[1];
    switch (o) {
        case HORIZONTAL:
            if (r < 0 || r >= LINHAS || c < 0 || c + TAM_NAVIO - 1 >= COLUNAS) return false;
            for (int i = 0; i < TAM_NAVIO; i++) if (tab[r][c + i] != AGUA) return false;
            break;
        case VERTICAL:
            if (c < 0 || c >= COLUNAS || r < 0 || r + TAM_NAVIO - 1 >= LINHAS) return false;
            for (int i = 0; i < TAM_NAVIO; i++) if (tab[r + i][c] != AGUA) return false;
            break;
        case DIAG_DR:
            if (r < 0 || c < 0 || r + TAM_NAVIO - 1 >= LINHAS || c + TAM_NAVIO - 1 >= COLUNAS) return false;
            for (int i = 0; i < TAM_NAVIO; i++) if (tab[r + i][c + i] != AGUA) return false;
            break;
        case DIAG_DL:
            if (r < 0 || c >= COLUNAS || r + TAM_NAVIO - 1 >= LINHAS || c - (TAM_NAVIO - 1) < 0) return false;
            for (int i = 0; i < TAM_NAVIO; i++) if (tab[r + i][c - i] != AGUA) return false;
            break;
    }
    return true;
}

void posiciona(int tab[LINHAS][COLUNAS], const int inicio[2], Orient o, const int navio[TAM_NAVIO]) {
    int r = inicio[0], c = inicio[1];
    switch (o) {
        case HORIZONTAL: for (int i = 0; i < TAM_NAVIO; i++) tab[r][c + i] = navio[i]; break;
        case VERTICAL:   for (int i = 0; i < TAM_NAVIO; i++) tab[r + i][c] = navio[i]; break;
        case DIAG_DR:    for (int i = 0; i < TAM_NAVIO; i++) tab[r + i][c + i] = navio[i]; break;
        case DIAG_DL:    for (int i = 0; i < TAM_NAVIO; i++) tab[r + i][c - i] = navio[i]; break;
    }
}

int main() {
    char linha[10] = {'A','B','C','D','E','F','G','H','I','J'};
    int tabuleiro[10][10];
    for (int i = 0; i < 10; i++) {
        for (int j = 0; j < COLUNAS; j++) tabuleiro[i][j] = AGUA;
    }

    int navioH1[TAM_NAVIO] = {NAVIO,NAVIO,NAVIO};
    int navioV1[TAM_NAVIO] = {NAVIO,NAVIO,NAVIO};
    int navioD1[TAM_NAVIO] = {NAVIO,NAVIO,NAVIO};
    int navioD2[TAM_NAVIO] = {NAVIO,NAVIO,NAVIO};

    int iniH1[2] = {2,1};   // horizontal
    int iniV1[2] = {5,7};   // vertical
    int iniD1[2] = {0,3};   // diagonal ↘  (ajustado para evitar colisão)
    int iniD2[2] = {0,9};   // diagonal ↙

    if (!cabe(tabuleiro, iniH1, HORIZONTAL)) { printf("Erro no H1\n"); return 1; }
    posiciona(tabuleiro, iniH1, HORIZONTAL, navioH1);

    if (!cabe(tabuleiro, iniV1, VERTICAL))   { printf("Erro no V1\n"); return 1; }
    posiciona(tabuleiro, iniV1, VERTICAL, navioV1);

    if (!cabe(tabuleiro, iniD1, DIAG_DR))    { printf("Erro no D1\n"); return 1; }
    posiciona(tabuleiro, iniD1, DIAG_DR, navioD1);

    if (!cabe(tabuleiro, iniD2, DIAG_DL))    { printf("Erro no D2\n"); return 1; }
    posiciona(tabuleiro, iniD2, DIAG_DL, navioD2);

    printf("\nTabuleiro 10x10 (0 = agua, 3 = navio)\n\n");
    printf("   "); for (int j = 0; j < COLUNAS; j++) printf("%d ", j); printf("\n");
    for (int r = 0; r < LINHAS; r++) {
        printf("%c  ", linha[r]);
        for (int c = 0; c < COLUNAS; c++) printf("%d ", tabuleiro[r][c]);
        printf("\n");
    }
    return 0;
}
